static INPUT: &str = ".#..#....##...#....#.....#.#...
........##....#..#..##....#.#..
......##......##.........#....#
...#.....#....##.......#.#....#
.#.###.#.#..#.....##..#....#.#.
##.........##.....####......#..
#...#..........#.##............
####............#..........#.#.
......#......#....##...#..##...
#..#....#...#......#......####.
......#..........#.........#.#.
...##.......#..#.#..#..#....#..
..####....#.#...............##.
...###........#.....#..........
#..#.##...##.#..##...##...#....
.###........#.##..#.#.....#....
.#.......#..##.......#......#..
.##...........#..............#.
...#..#.....#...........#...#..
.....#..............#..#.......
.......#....#.....##...........
.#...#.............#.....##....
....#.#....#...#...#..#..##.#..
...#..##..##...#..##........#.#
.###..#...#.#.#.#..#...#.......
.....##.#.##.#.#.......#..#....
.##.#...#.....#...#....#.....#.
.....#......###....###..##.#..#
.....#..##....#..#.#..#.#.#....
#....#.....#.#.......#...#....#
...#........#............#..#..
#.#...#...#..##.........#...##.
.#..#.#...........#....#...#...
##..#.#..........#.....###...#.
#..#........#.......#.#..#....#
..#...##....#..#....#....#.....
...#.....##....#...#..#....##.#
.....#......#...#.#.#.#.#......
###.....#..#.#..........##.#...
...............#..#...#.#....#.
#.....#.....###....#..........#
........#...#.#.......#..#...#.
..#.##...#...#...#.........#...
#..........#..#.#...........##.
##.......#.#.#...#.....#.......
...#.#.#.....#......#....##..#.
##.#.....#....#...#.......#....
.#......##..#.##.#....##..##.#.
..#..#......#....#...#..#.#....
...#..###...#.......#..#.......
...#....#..#....#........##....
#...#...#....#.#.........###.#.
.#.........##..##...#..........
...##.....##.........#..#..#...
###....#......#.##..#...#......
.###....#.#.......#..#....#...#
....####........##....#.#....##
..#.....#......##...#..#..#....
...#....#...#......#.###.#.#.#.
......#.......#..#...#...#.....
.#...#...#..#.#..........#.....
........#..#.........#.#....##.
.#....#.......#........#.##.#..
...#...#..#.....#......#...##..
.#.................#........###
.......#.#..#.#...#............
.#.......#..##...#.###....#.##.
#........#.###.#..#........##..
..##.#....##......##........#..
...............#...............
#.......#......##..#.#....#.#.#
..#.....#......#.#.#...#...##..
..........#........#.....##...#
#..........#.#..#..##..#......#
.......#..###..##.#..##........
#.#..##..###..#.###.....#.#..##
..#.#........#...###...##......
.......##.....##...#.##........
.#.#...###..#..#......##....##.
#...#.#.....##..#..#..#.#....#.
........#......#....#..#.......
...#.#.#.#........###....#...#.
.#......#...#.......#......#...
#...#.##.#..#.#..#.........#...
....#......##......#........#.#
..##.#.....#..#......#..#......
#.##...##...#................#.
.....#..#....#....#####........
....#..#..#.#...#.#............
.........#.#....#..#....##...#.
#....#..........#......#......#
.......#..............#......#.
.#..#...#..#.#.....#.#.#.##.#..
.##........#......#...#.##.....
...#.##..#........#...........#
..#...#..#........#.......#.#..
#.....#..#.#..#..#...#...#..#..
..................#.#.....#...#
........#...##.#..#.........#..
.#...##.#...........##.##...#..
#......#.........#...#...#...#.
..........#.............#...#..
#............##.#..#...#.#...#.
..#.##...##....##.#...####...#.
#.##..#......#.......#.#...##..
.....#...#..#......#####.##..#.
#...#.#.##..#..##.....#......#.
.#..#......#.#.#...#.#...##.#..
.#.....#..##........#.....#...#
.................#..........#..
##.#.#......#.####..#.....#....
.#...##.####..#...#............
..#...............###....#....#
#...#..###..#.#.##...........##
...................#..#.....#..
...#.##.#...#.....#......#.##..
#.#...#.........##.#........#.#
.##.......#..#..#.....##....#..
......##.#.#..#...#.#..##.....#
..#..###...#...#......#.#......
..##....#.#...#....#....#..#..#
#..##....#........#..##..#..#.#
.......#............#....##..#.
.#.#..#.........#.#.##......#..
#.#....#..##..#..###.#.....##..
.###.#......#.....#####...#....
#...#.#...##......#...#.#...##.
#..#.........#..#............#.
...##......##.......##....##...
...#...##....###..###.#...#....
#.#....#...#.#...##..#........#
.#..#..................#....#..
#......#..#...##..##...#..##..#
...#..#.....#...#........#.#.#.
#...#..##....#.....#........#..
.##..#....#.....#.#............
##..##.#.#.##.#.#..#.#..#....#.
#.......#...............#.....#
..#.....#..##.....#...##.##....
...#..#...#.#.#....#......#....
###.#.......#....#....#.#...#..
.....###..#...###.#.#..#.......
.....#.........##.#....#..##.#.
........#....#....#....#.#..##.
........###....#.#.........#.#.
.#..###..#........#.......##.#.
.#.#...........................
..#....##...#.#....#....#.#....
.#...#...##.#........###....#..
#.#....#...#.#.#...##......##..
#......#....#...#..#....#...#..
...#..##........#.#...##......#
....##...........##...#..#..#..
......#..#........#..#....##.##
.###..#.#.........#.....#......
.#..##............#......#.....
..##.#.#..#..#.###....#..#..#..
....#.#..#.#..##...##.#.#.#.#..
....#..#....#...............#..
..#...#.##.....##....#..##..#..
.......##.#....#.##....#.......
.#...#........#...#......#.###.
..#....##.......#....#.#...#.#.
.....#.....#...##..#....#.#..##
..##........##............##...
..........#...#.......#.......#
.#...............#...#.##......
#.##......#....#.##.#..#..#...#
......###.........#...#..#....#
....#......#...#....#....#...#.
#...##...#....#......####....#.
.................#......#......
..#..........##.......##..#.##.
.#.....#.......#...######..#..#
....##.#...#...#..........#....
.....#.......#...#.#.......###.
#...#.###.....#...#.......#....
.#.##.####....#.....#.#........
.......#.....##............##..
..#...#.#.##........#...##...#.
........#...####.##..#....#...#
#.......#...##.#......#..#...#.
......#.........#..###.#.#....#
#..##...#...#..#...#...#.....#.
.#...#...#.#.................##
#......#.....#..#.#..#......##.
.......#.##...#.......#.......#
.#.#..#..#......#....#.#...#.#.
..#...#.#..#......#...#.#.#....
........#..............#..##...
.##..#..##.#....#.#..###..#..#.
..#....#......#...#.#.#....#...
...#..#..#....#..#.....##......
.#......#...#........##........
.#......#..#...##..#..#.#.#....
.##......#.##.........#....#...
....#....##..#..###.#..#......#
....#....##..........#.#...#...
..##.#.............#..#.....#..
..#.....#....#....#.......##...
.##.#....#....#...#....##.#....
...#.#..#.###.#..#.#.......#.#.
.....##.....#.......#......#...
.#.....#..#.#.#..#........##...
##.....................#.......
..###............#........##..#
.#.##.....#..#..#..#.#.......#.
.##...................#..#..#..
..#.#...#..........##..#..##...
#......#..#..#.#..#......#..#.#
.#...#....#.#.........#.....#.#
#..........#.#....#....#.#.#.#.
#.....#..........#..#....#..#..
........#....#..##.#.#.......#.
.#.......##.......#..##...#....
...#..##..#......##.#..#.#..#..
.#..#.......#..##..#......#....
###.#.........#......#.#.......
...#......#....#..##..#.#..#...
......#..#.....#.........#....#
....#..#..#..#.........##.#..#.
......#..#..#..#....#...#..##.#
......##.#..#..#.#.......#.#.##
..#.....#...#..#....#..........
.##..##.....##.......#.##.#....
...#..#.......#..#.......#.....
.........#....##..#.#....#.#...
.....#..#...#.........#....#..#
.........##.....#.#...#.###...#
.#......####..##...#..#........
.#......##....#.....#..........
##.......##.#.......#..........
.#......#.#.#.#....#........#..
......##..##...#...#...........
.#...#.#..#......#.#.#.#....#.#
...#.........#.....#...###.....
#.....##....#.##...#....#......
.#..#...#..##.###.#.#.#...#....
...#......#..#....#...#...#....
.#..............#.....#........
..##...#.....#..#.....#..#.#...
.##...#....#.##...#.........##.
..#......#...##..#.....#......#
#.#..............#...#...#..#.#
..#..#.#...........#...#.#.#...
#..........#...#..#..##..#....#
............#...#........###...
.........#.....#.....#..#......
#...#.#..##......#.#####.......
...#........#..............#...
......###.#.#.....#..#....##.#.
.#.#.#..##....###.#..#....##...
.#....#.##............##.#.....
##...##.#......#.#.##.##...###.
.......#.#........#.....#......
....#.....#......#...#.#..#....
.#.........#....#...#...#...#.#
#.......#................#..#..
.##...........#.##...##....#...
#...#.#...###.........#.......#
.#...#.........................
#.......#...#.....##.##...##...
.#.#....#.......#.#.##.#....#..
#..#....#...#.#.##.#....#....#.
.##.....#.#..#...#..#..........
.............#...#.#..#........
....#........#..#......##......
#.....#....#.....#.......#.....
........#.......##....#........
.#.#..##.......................
##..#.....#........#.....#.....
.#......#.#...#.#..........#..#
.#..#.....#..#..........#.###..
......#.#..#.#.......#.#.....#.
.#....#......#..##.............
#...##.........#.#.#...#.....#.
..#................#..#..###...
#.....#....##.#..##......#.#.#.
..#....#...#...#...............
#................#....#...#.#..
................#...#.....#.##.
..#.#.#..#.##.......##.......##
...........#......##.......###.
...#.......##.........#.#.#.#..
.#...#.#..#...#.#.....#........
............#####......##......
....###....#.##...#..#.........
..#.#...#.......#...#...#.###..
..............##..#...#....#...
#.#..##...#....##.........#....
..#...#.....#...........#...#..
#.#..###..#.#..#........#..#.#.
...###...##...#...#.#.........#
..#........#.....#.#.#.......#.
...#..#..........#.....#...#...
....#..#.....#....##....#.##...
.....##..#...#.#..##...#...##.#
...........###...##....#.......
##..#.#..#..#...#....##..#..#..
##...#.#......##.#..#...#....#.
.#.......#...........#...#.....
#...#....#.......#...#.##......
.........#.......#...#.#...#...
.......##.#..................#.
........#..#.#......#.....#....
.....#.#.#.#....##...#.###.....
#.#.........#..#.#.#.#.#.......
.............#....#.......###..
.#.##....#....##.........####..
...........###.#...............
#.........##.#.#..#.....##.###.
.#.#.....#.#...#.....##...#...#
#....#...#.........#.#.......#.
.....#.###..#....#...##..#...#.
#........#....#.#..#....#.#....
#.#..##......#.........#.#.....
##..#.....#......###....#....#.
#.#.####..#.#.#......##...#..#.
....#.....#.#.#.#.....#........
..##..........#......#.#.#..#..
.#...##.##.........#.........##
..#.#.#..........#..#..#......#
###..###..#...#................";

fn main() {
    let len = INPUT.find('\n').unwrap();

    let slopes = [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)].iter();

    let total = slopes
        .map(|(x, y)| {
            INPUT
                .lines()
                .enumerate()
                .filter(|(i, line)| {
                    let j = (i / y * x) % len;

                    (line.chars().nth(j).unwrap() == '#') && (i % y == 0)
                })
                .count()
        })
        .fold(1, |a, b| a * b);

    println!("{}", total);
}
